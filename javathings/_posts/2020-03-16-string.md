---
title: Java中的字符串
# image: /assets/img/blog/...
description: >
  记录一下Java中字符串类的用法和区别
# cofigure what you want to add in the end of the post, [about, newsletter, related, random, license]
addons: [license]
# the tag of post.
---
主要介绍Java中字符串的用法，以及分析对比各种字符串方法中的效率问题<br>


## String的用法
```java
// 直接赋值
String s = "java";

//通过构造函数, 一般不推荐这样做(这里，先挖一个坑)
String ss = new String("java");
```

## String, StringBuffer和StringBuilder的区别

> String不可变(除了hash属性，其他均为`final`)，本质是一个字符数组，需要频繁操作字符串时(比如，字符串拼接)，会产生大量的中间对象，性能影响很大。
>
> StringBuilder用来解决频繁拼接问题设计的类，继承AbstractStringBuilder，底层实现是一个可变的字符数组，支持字符串的拼接和删除，不会产生大量无用的中间对象，并且线程安全(所有修改数据的方法都是`synchronized`修饰的)。
>
> StringBuffer也是继承AbstractStringBuilder，不过去掉了线程安全部分，效率要比StringBuffer高。

## 字符串的拼接

## 为什么说不推荐使用构造方法创建字符串

## 如何理解String的不可变
首先看一下String的源码
```java 
public final class String
    implements java.io.Serializable, Comparable<String>, CharSequence {
    /** The value is used for character storage. */
    private final char value[];
```
String本质上是一个`private`和`final`的字符数组，它的不可变主要是指的value的引用不可变(只能指向JVM内存中的某一个地址)，这里主要是`final`起的作用，其实在String内部，可以通过`value[1] = 'c'`的方式修改数据。之所以是不变的，主要是:<br>
1. String类里面没有定义修改数据的方法
2. `private`使得外部类无法访问`value`
3. `final`规定了String无法被继承，且该类的对象在JVM堆内存地址不变

*** * ***
这里再说一下，如果JVM将String对象的内存控制权交给了本地方法，那么内存是可以被改变的！

## String的源码分析